!function(t){function e(o){if(i[o])return i[o].exports;var n=i[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var i={};e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,o){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=28)}({2:function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),a=function(t){function e(){o(this,e);var t=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.v(5,0,0),t.v(-5,-2,1),t.v(-5,0,0),t.v(-5,-2,-1),t.v(0,2,-6),t.v(0,2,6),t.v(2,0,0),t.v(-3,0,0),t.f3(0,2,1),t.f3(4,7,6),t.f3(5,6,7),t.computeFaceNormals(),t}return r(e,t),s(e,[{key:"v",value:function(t,e,i){this.vertices.push(new THREE.Vector3(t,e,i))}},{key:"f3",value:function(t,e,i){this.faces.push(new THREE.Face3(t,e,i))}}]),e}(THREE.Geometry);e.default=a},28:function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),r=i(2),s=function(t){return t&&t.__esModule?t:{default:t}}(r),a=function(){function t(){o(this,t),this.vector=new THREE.Vector3,this._acceleration=new THREE.Vector3,this._width=500,this._height=500,this._depth=200,this._goal=null,this._neighborhoodRadius=100,this._maxSpeed=4,this._maxSteerForce=.1,this._avoidWalls=!1,this.position=new THREE.Vector3,this.velocity=new THREE.Vector3}return n(t,[{key:"setGoal",value:function(t){this._goal=t}},{key:"setAvoidWalls",value:function(t){this._avoidWalls=t}},{key:"setWorldSize",value:function(t,e,i){this._width=t,this._height=e,this._depth=i}},{key:"avoid",value:function(t){var e=new THREE.Vector3;return e.copy(this.position),e.sub(t),e.multiplyScalar(1/this.position.distanceToSquared(t)),e}},{key:"repulse",value:function(t){var e=this.position.distanceTo(t);if(e<150){var i=new THREE.Vector3;i.subVectors(this.position,t),i.multiplyScalar(.5/e),this._acceleration.add(i)}}},{key:"reach",value:function(t,e){var i=new THREE.Vector3;return i.subVectors(t,this.position),i.multiplyScalar(e),i}},{key:"alignment",value:function(t){for(var e,i=new THREE.Vector3,o=0,n=0,r=t.length;n<r;n++)if(!(Math.random()>.6)){e=t[n];var s=e.position.distanceTo(this.position);s>0&&s<=this._neighborhoodRadius&&(i.add(e.velocity),o++)}if(o>0){i.divideScalar(o);var a=i.length();a>this._maxSteerForce&&i.divideScalar(a/this._maxSteerForce)}return i}},{key:"cohesion",value:function(t){for(var e,i,o=new THREE.Vector3,n=new THREE.Vector3,r=0,s=0,a=t.length;s<a;s++)Math.random()>.6||(e=t[s],(i=e.position.distanceTo(this.position))>0&&i<=this._neighborhoodRadius&&(o.add(e.position),r++));r>0&&o.divideScalar(r),n.subVectors(o,this.position);var h=n.length();return h>this._maxSteerForce&&n.divideScalar(h/this._maxSteerForce),n}},{key:"separation",value:function(t){for(var e,i,o=new THREE.Vector3,n=new THREE.Vector3,r=0,s=t.length;r<s;r++)Math.random()>.6||(e=t[r],(i=e.position.distanceTo(this.position))>0&&i<=this._neighborhoodRadius&&(n.subVectors(this.position,e.position),n.normalize(),n.divideScalar(i),o.add(n)));return o}},{key:"flock",value:function(t){this._goal&&this._acceleration.add(this.reach(this._goal,.005)),this._acceleration.add(this.alignment(t)),this._acceleration.add(this.cohesion(t)),this._acceleration.add(this.separation(t))}},{key:"move",value:function(){this.velocity.add(this._acceleration);var t=this.velocity.length();t>this._maxSpeed&&this.velocity.divideScalar(t/this._maxSpeed),this.position.add(this.velocity),this._acceleration.set(0,0,0)}},{key:"run",value:function(t){this._avoidWalls&&(this.vector.set(-this._width,this.position.y,this.position.z),this.vector=this.avoid(this.vector),this.vector.multiplyScalar(5),this._acceleration.add(this.vector),this.vector.set(this._width,this.position.y,this.position.z),this.vector=this.avoid(this.vector),this.vector.multiplyScalar(5),this._acceleration.add(this.vector),this.vector.set(this.position.x,-this._height,this.position.z),this.vector=this.avoid(this.vector),this.vector.multiplyScalar(5),this._acceleration.add(this.vector),this.vector.set(this.position.x,this._height,this.position.z),this.vector=this.avoid(this.vector),this.vector.multiplyScalar(5),this._acceleration.add(this.vector),this.vector.set(this.position.x,this.position.y,-this._depth),this.vector=this.avoid(this.vector),this.vector.multiplyScalar(5),this._acceleration.add(this.vector),this.vector.set(this.position.x,this.position.y,this._depth),this.vector=this.avoid(this.vector),this.vector.multiplyScalar(5),this._acceleration.add(this.vector)),Math.random()>.5&&this.flock(t),this.move()}}]),t}(),h=window.innerWidth,c=window.innerHeight,l=h/2,d=c/2;new(function(){function t(){o(this,t),this.animate=this.animate.bind(this),this.onWindowResize=this.onWindowResize.bind(this),this.onDocumentMouseMove=this.onDocumentMouseMove.bind(this),this.camera=new THREE.PerspectiveCamera(75,h/c,1,1e3),this.camera.position.z=450,this.scene=new THREE.Scene,this.birds=[],this.boids=[];for(var e=0;e<200;e++){var i=this.boids[e]=new a;i.position.x=400*Math.random()-200,i.position.x=400*Math.random()-200,i.position.y=400*Math.random()-200,i.position.z=400*Math.random()-200,i.velocity.x=2*Math.random()-1,i.velocity.y=2*Math.random()-1,i.velocity.z=2*Math.random()-1,i.setAvoidWalls(!0),i.setWorldSize(500,500,400);var n=this.birds[e]=new THREE.Mesh(new s.default,new THREE.MeshBasicMaterial({color:16777215*Math.random(),side:THREE.DoubleSide}));n.phase=Math.floor(62.83*Math.random()),this.scene.add(n)}this.renderer=new THREE.WebGLRenderer,this.renderer.setClearColor(16777215),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(h,c),document.addEventListener("mousemove",this.onDocumentMouseMove,!1),document.body.appendChild(this.renderer.domElement),window.addEventListener("resize",this.onWindowResize,!1),this.animate()}return n(t,[{key:"onWindowResize",value:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}},{key:"onDocumentMouseMove",value:function(t){for(var e=new THREE.Vector3(t.clientX-l,-t.clientY+d,0),i=0,o=this.boids.length;i<o;i++){var n=this.boids[i];e.z=n.position.z,n.repulse(e)}}},{key:"animate",value:function(){requestAnimationFrame(this.animate),this.render()}},{key:"render",value:function(){for(var t=0,e=this.birds.length;t<e;t++){var i=this.boids[t];i.run(this.boids);var o=this.birds[t];o.position.copy(this.boids[t].position);var n=o.material.color;n.r=n.g=n.b=(500-o.position.z)/1e3,o.rotation.y=Math.atan2(-i.velocity.z,i.velocity.x),o.rotation.z=Math.asin(i.velocity.y/i.velocity.length()),o.phase=(o.phase+(Math.max(0,o.rotation.z)+.1))%62.83,o.geometry.vertices[5].y=o.geometry.vertices[4].y=5*Math.sin(o.phase)}this.renderer.render(this.scene,this.camera)}}]),t}())}});